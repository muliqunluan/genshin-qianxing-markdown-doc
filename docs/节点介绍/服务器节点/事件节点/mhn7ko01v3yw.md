# mhn7ko01v3yw

## 一、自定义变量

### 1.节点图变量变化时

#### 节点功能

当前节点图的节点图变量发生变化时，触发该事件注意变化前值和变化后值为泛型，需确定其泛型类型后，才能正确接收到对应类型节点图变量的事件容器类型的节点图变量没有变化前值和变化后值出参

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体与节点图关联的实体 |
| 出参 | 事件源 | GUID | GUID与节点图关联的实体的GUID |
| 出参 | 变量名 | 字符串 | 发生变化的变量的名称 |
| 出参 | 变化前值 | 泛型 | 变量变化前的值 |
| 出参 | 变化后值 | 泛型 | 变量变化后的值 |

### 2.自定义变量变化时

#### 节点功能

当前节点图所关联实体的自定义变量发生变化时，触发该事件注意变化前值和变化后值为泛型，需确定其泛型类型后，才能正确接收到对应类型自定义变量的事件容器类型的自定义变量没有变化前值和变化后值出参

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体与节点图关联的实体 |
| 出参 | 事件源 | GUID | GUID与节点图关联的实体的GUID |
| 出参 | 变量名 | 字符串 | 发生变化的变量的名称 |
| 出参 | 变化前值 | 泛型 | 变量变化前的值 |
| 出参 | 变化后值 | 泛型 | 变量变化后的值 |

## 二、预设状态

### 1.预设状态变化时

#### 节点功能

节点图所关联的实体的预设状态发生变化时，触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 预设状态索引 | 整数 |  |
| 出参 | 变化前值 | 整数 |  |
| 出参 | 变化后值 | 整数 |  |

## 三、实体相关

### 1.角色移动速度达到条件时

#### 节点功能

为角色实体添加单位状态效果【监听移动速率】，达成条件会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 单位状态 | 配置ID | 配置ID |
| 出参 | 条件：比较类型 | 枚举 |  |
| 出参 | 条件：比较值 | 浮点数 |  |
| 出参 | 当前移动速度 | 浮点数 |  |

### 2.实体创建时

#### 节点功能

实体被创建时，触发该事件所有类型的实体均可以触发该事件。关卡实体、角色实体和玩家实体会在进入关卡时触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |

### 3.实体销毁时

#### 节点功能

关卡内任意实体被销毁时触发该事件，该事件仅在关卡实体上可以触发。任意类型的实体销毁均可以触发该事件，包括角色实体被击倒仅包含因战斗（生命值变为0）或【销毁实体】节点而造成的销毁会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体被销毁的实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 位置 | 三维向量 |  |
| 出参 | 朝向 | 三维向量 |  |
| 出参 |  | 实体 | 类型枚举 |
| 出参 | 伤害来源 | 实体 |  |
| 出参 | 归属者 | 实体 | 实体 |
| 出参 | 自定义变量组件快照 | 自定义变量快照 | 销毁时，该实体上的自定义变量组件的快照。可以使用【查询自定义变量快照】节点获取其中的自定义变量值 |

### 4.实体移除/销毁时

#### 节点功能

关卡内任意实体被移除或销毁时触发该事件，该事件仅在关卡实体上可以触发实体被销毁或被移除均会触发该事件。因此实体被销毁时，会依次触发【实体销毁时】以及【实体移除/销毁时】事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | GUID | GUID |

## 四、阵营相关

### 1.实体阵营变化时

#### 节点功能

实体的阵营变化时，触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |

## 五、玩家与角色相关

### 1.角色倒下时

#### 节点功能

角色倒下时，角色实体上的节点图可以触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 角色 | 实体 | 实体 |
| 出参 | 原因 | 枚举 | 节点图导致：因节点图的【销毁实体】节点导致的角色倒下正常倒下：因生命值变为0导致的角色倒下非正常倒下：因溺水、坠 |
| 出参 | 击倒者 | 实体 | 实体 |

### 2.角色复苏时

#### 节点功能

角色复苏时，角色实体上的的节点图可以触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 角色 | 实体 | 实体 |

### 3.玩家传送完成时

#### 节点功能

玩家传送完成时，在玩家实体的节点图上可以触发该事件玩家首次进入关卡时，也会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 玩家 | 实体 | 实体 |
| 出参 | 玩家 | GUID | GUID |

### 4.玩家所有角色倒下时

#### 节点功能

玩家的所有角色实体均倒下时，玩家实体的节点图上触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 玩家 | 实体 | 实体 |
| 出参 | 原因 | 枚举 | 节点图导致：因节点图的【销毁实体】节点导致的角色倒下正常倒下：因生命值变为0导致的角色倒下非正常倒下：因溺水、坠 |

### 5.玩家所有角色复苏时

#### 节点功能

玩家的所有角色均复苏时，玩家实体的节点图触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 玩家 | 实体 | 实体 |

### 6.玩家异常倒下并复苏时

#### 节点功能

角色因溺水、坠入深渊等原因倒下并复苏时，玩家实体上触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 玩家 | 实体 | 实体 |

## 六、碰撞触发器

### 1.进入碰撞触发器时

#### 节点功能

运行中实体A的”碰撞触发源“范围，进入其他运行中实体B的“碰撞触发器”范围。会发送节点图事件给配置“碰撞触发器”的实体B

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 触发器 | 实体 | 实体上述中的实体B |
| 出参 | 触发器 | 实体 | GUIDGUID |
| 出参 | 触发器序号 | 整数 | 实体B碰撞触发器组件中的对应序号的触发器 |

### 2.离开碰撞触发器时

#### 节点功能

运行中实体A的“碰撞触发源”范围，离开其他运行中实体B的“碰撞触发器”范围会发送节点图事件给配置“碰撞触发器”的实体B

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 离开者 | 实体 | 实体上述中的实体A |
| 出参 | 离开者 | 实体 | GUIDGUID |
| 出参 | 触发器 | 实体 | 实体上述中的实体B |
| 出参 | 触发器 | 实体 | GUIDGUID |
| 出参 | 触发器序号 | 整数 |  |

## 七、战斗

### 1.被恢复生命值时

#### 节点功能

实体被恢复生命值时，触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 治疗者 | 实体 | 实体 |
| 出参 | 恢复量 | 浮点数 | 实际的恢复量。如果实体恢复前并未损失生命值，则恢复量为0 |
| 出参 | 恢复标签 | 列表 | 字符串列表 |

### 2.发起恢复生命值时

#### 节点功能

实体向其他实体恢复生命值时，发起者实体上触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 恢复目标 | 实体 | 实体 |
| 出参 | 恢复量 | 浮点数 | 实际的恢复量。如果目标实体恢复前并未损失生命值，则恢复量为0 |
| 出参 | 恢复标签 | 列表 | 字符串列表 |

### 3.攻击命中时

#### 节点功能

实体的攻击命中其他实体时，触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 受击者 | 实体 | 实体 |
| 出参 | 伤害量 | 浮点数 | 实际造成的伤害量。因无敌等原因未造成伤害时，伤害量为0 |
| 出参 | 攻击标签 | 列表 | 字符串列表 |
| 出参 | 元素类型 | 枚举 |  |
| 出参 | 元素攻击强效 | 浮点数 | 攻击包含的元素含量 |

### 4.受到攻击时

#### 节点功能

实体受到攻击时触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 攻击者 | 实体 | 实体 |
| 出参 | 伤害量 | 浮点数 | 实际造成的伤害量。因无敌等原因未造成伤害时，伤害量为0 |
| 出参 | 攻击标签 | 列表 | 字符串列表 |
| 出参 | 元素类型 | 枚举 |  |
| 出参 | 元素攻击强效 | 浮点数 | 攻击包含的元素含量 |

### 5.进入易受打断状态时

#### 节点功能

实体被攻击进入易受打断状态时触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 攻击者 | 实体 |  |

## 八、运动器

### 1.基础运动器停止时

#### 节点功能

基础运动器组件上的某个基础运动器完成运动时或被关闭时向组件持有者发送该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体组件持有者 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 运动器名称 | 字符串 |  |

### 2.路径到达路点时

#### 节点功能

路径运动器到达路点时发送给基础运动器组件的持有者，需要在路点配置中配置“到达路点发送事件”才会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体组件持有者 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 运动器名称 | 字符串 |  |
| 出参 | 路径点序号 | 整数 |  |

## 九、命中判定

### 1.命中检测触发时

#### 节点功能

命中检测组件命中其他实体或场景时组件的持有者触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 是否命中受击盒 | 布尔值 | 为否时，命中的是场景为是时，命中实体，此时可以从【命中实体】 |
| 出参 | 命中 | 实体 | 实体仅当命中受击盒时，命中实体才有意义 |
| 出参 | 命中位置 | 三维向量 |  |

## 十、定时器

### 1.定时器触发时

#### 节点功能

定时器运行到指定时间节点时，触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 定时器名称 | 字符串 |  |
| 出参 | 定时器序列序号 | 整数 |  |
| 出参 | 循环次数 | 整数 |  |

## 十一、全局计时器

### 1.全局计时器触发时

#### 节点功能

当倒计时的全局计时器计时结束时，会触发该事件正计时的全局计时器不会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 计时器名称 | 字符串 |  |

## 十二、界面控件组

### 1.界面控件组触发时

#### 节点功能

只有交互按钮和道具展示类型的界面控件，才会触发本事件在关卡运行中，通过交互按钮或道具展示界面控件制作的界面控件组，被执行交互操作会发送节点图事件”界面控件组触发时“，此事件只有触发交互的玩家节点图可以获取

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 界面控件组组合索引 | 整数 | 如果触发该事件的界面控件和其他界面控件组成了多控件界面控件组(即界面控件组组合)，此 |
| 出参 | 界面控件组索引 | 整数 | 触发该事件的界面控件为单控件界面控件组，则此处为该界面控件组的索引。触发该事件的界面控件为多控件界面控件组，则此处为组合内对应该界面控件的索引 |

## 十三、单位状态

### 1.单位状态变更时

#### 节点功能

单位状态的层数发生变化时，触发该事件单位状态的施加以及移除都会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 单位状态 | 配置ID | 配置ID |
| 出参 | 施加者 | 实体 | 实体 |
| 出参 | 持续时间是否无限 | 布尔值 |  |
| 出参 | 状态剩余时长 | 浮点数 |  |
| 出参 | 状态剩余层数 | 整数 | 变化后的层数 |
| 出参 | 状态原始层数 | 整数 | 变化前的层数 |
| 出参 | 槽位序号 | 整数 | 发生变化的单位状态槽位的序号 |

### 2.单位状态结束时

#### 节点功能

单位状态因为各种原因被移除或因时长结束时触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 单位状态 | 配置ID | 配置ID |
| 出参 | 施加者 | 实体 | 实体 |
| 出参 | 持续时间是否无限 | 布尔值 |  |
| 出参 | 状态剩余时长 | 浮点数 |  |
| 出参 | 状态剩余层数 | 整数 |  |
| 出参 | 移除者 | 实体 | 实体 |
| 出参 | 移除原因 | 枚举 | 其他单位状态顶替：因被施加了顶替状态导致单位状态被移除超 |
| 出参 | 槽位序号 | 整数 | 发生变化的单位状态槽位的序号 |

### 3.发生元素反应事件时

#### 节点功能

为实体添加单位状态效果【监听元素反应】，达成条件会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 元素反应类型 | 枚举 |  |
| 出参 | 触发者 | 实体 | 实体 |
| 出参 | 触发者 | GUID | GUID |

### 4.护盾受到攻击时

#### 节点功能

为实体添加单位状态效果【添加护盾】，受到攻击时触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 攻击者 | 实体 | 实体 |
| 出参 | 攻击者 | GUID | GUID |
| 出参 | 单位状态 | 配置ID | 配置ID |
| 出参 | 攻击前层数 | 整数 |  |
| 出参 | 攻击后层数 | 整数 |  |
| 出参 | 攻击前该单位状态的护盾含量 | 浮点数 |  |
| 出参 | 攻击后该单位状态的护盾含量 | 浮点数 |  |

## 十四、选项卡

### 1.选项卡选中时

#### 节点功能

生效的选项卡被选中后，会向节点图发送事件配置选项卡组件的实体节点图，会接收该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体挂载选项卡组件的实体 |
| 出参 | 事件源 | GUID | GUID挂载选项卡组件的实体GUID，若无则输 |
| 出参 | 选项卡序号 | 整数 | 选项卡的序号 |
| 出参 | 选择者 | 实体 | 实体触发选项卡时的角色实体 |

## 十五、造物

### 1.造物入战时

#### 节点功能

仅在经典仇恨模式生效造物入战时触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |

### 2.造物脱战时

#### 节点功能

仅在经典仇恨模式生效造物脱战时触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |

## 十六、职业

### 1.玩家职业等级变化时

#### 节点功能

玩家职业等级变化时触发该事件发送给对应玩家，可以在该职业的职业节点图里收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体生效的玩家实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 变化前等级 | 整数 |  |
| 出参 | 变化后等级 | 整数 |  |

### 2.玩家职业更改时

#### 节点功能

玩家职业更改时触发该事件发送给对应玩家，可以在更改后职业的职业节点图里收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 更改前职业 | 配置ID | 配置ID |
| 出参 | 更改后职业 | 配置ID | 配置ID |

### 3.玩家职业解除时

#### 节点功能

玩家职业解除时触发该事件发送给对应玩家，可以在更改前职业的职业节点图里收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 更改前职业 | 配置ID | 配置ID |
| 出参 | 更改后职业 | 配置ID | 配置ID |

## 十七、技能

### 1.技能节点调用时

#### 节点功能

通过技能节点图的【通知服务器节点图】节点触发，可以传入三个字符串类型的值

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 调用者 | 实体 | 实体 |
| 出参 | 调用者 | GUID | GUID |
| 出参 | 参数1 | 字符串 |  |
| 出参 | 参数2 | 字符串 |  |
| 出参 | 参数3 | 字符串 |  |

## 十八、自定义仇恨

### 1.仇恨目标变化时

#### 节点功能

仅自定义仇恨模式可用仇恨目标发生变化时，触发该事件入战和脱战也可以触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 变化前仇恨目标 | 实体 |  |
| 出参 | 变化后仇恨目标 | 实体 |  |

### 2.自身入战时

#### 节点功能

仅自定义仇恨模式可用实体自身入战时，触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |

### 3.自身脱战时

#### 节点功能

仅自定义仇恨模式可用实体自身脱战时，触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |

## 十九、信号

### 1.监听信号

#### 节点功能

监听已在信号管理器中定义的信号触发事件需先选择需要监听的信号名

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 事件源 | 实体 | 实体 |
| 出参 | 事件源 | GUID | GUID |
| 出参 | 信号来源 | 实体 | 实体使用【发送信号】节点发送该信号的实体 |

## 二十、卡牌选择器

### 1.卡牌选择器完成时

#### 节点功能

玩家操作完成卡牌选择器/或者因为时间原因强制关闭等，都会给玩家节点图触发本事件出参可以通知本次卡牌选择器的结果，和对应原因

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 目标玩家 | 实体 | 生效的玩家实体 |
| 出参 | 选择结果 | 列表 | 整数列表触发选择选择交互时，合法的选择结果会作为该 |
| 出参 | 提供，并且完成原因为玩家完成唤起弹窗选择全量刷新，触发刷新交互时，全量的选择结果对应 | 列表 | 会作为该 |
| 出参 | 完成原因 | 枚举 | 六种原因枚举玩家完成、全量刷新、定量刷新、超时关闭、主动关闭、节点图关闭 |
| 出参 | 卡牌选择器索引 | 整数 | 引用的卡牌选择器索引 |

## 二十一、文本气泡

### 1.文本气泡完成时

#### 节点功能

该事件仅能被挂载文本气泡组件，且完成对话的实体节点图接收完成的含义是最后一句对话播放完成

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 气泡归属者 | 实体 | 实体挂载文本气泡组件的运行时实体 |
| 出参 | 角色 | 实体 | 实体当前气泡对话的目标角色 |
| 出参 | 文本气泡 | 配置ID | 配置ID当前生效的文本气泡配置ID |
| 出参 | 文本气泡完成次数 | 整数 | 当前生效的文本气泡，对该对话角色，完整播放了几次 |

## 二十二、商店

### 1.商店出售背包物品时

#### 节点功能

商店出售背包物品时触发，商店组件的持有者可收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 商店持有者 | 实体 |  |
| 出参 | 商店持有者 | GUID | GUID |
| 出参 | 购买者 | 实体 | 实体 |
| 出参 | 商店序号 | 整数 |  |
| 出参 | 道具 | 配置ID | 配置ID |
| 出参 | 购买数量 | 整数 |  |

### 2.商店出售自定义商品时

#### 节点功能

商店出售自定义物品时触发，商店组件的持有者可收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 商店持有者 | 实体 |  |
| 出参 | 商店持有者 | GUID | GUID |
| 出参 | 购买者 | 实体 | 实体 |
| 出参 | 商店序号 | 整数 |  |
| 出参 | 商品序号 | 整数 |  |
| 出参 | 购买数量 | 整数 |  |

### 3.商店收购道具时

#### 节点功能

商店收购道具时触发，商店组件的持有者可收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 商店持有者 | 实体 |  |
| 出参 | 商店持有者 | GUID | GUID |
| 出参 | 商店序号 | 整数 |  |
| 出参 | 收购物品 | 字典 | 字典 |

## 二十三、装备

### 1.装备被穿戴时

#### 节点功能

装备被穿戴时触发该事件，装备的持有者可以收到，需要配置在道具节点图里

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 装备持有者 | 实体 | 实体 |
| 出参 | 装备持有者 | GUID | GUID |
| 出参 | 装备索引 | 整数 |  |

### 2.装备被卸下时

#### 节点功能

装备被卸下时触发该事件，装备的持有者可以收到，需要配置在道具节点图里

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 装备持有者 | 实体 | 实体 |
| 出参 | 装备持有者 | GUID | GUID |
| 出参 | 装备索引 | 整数 |  |

### 3.装备初始化时

#### 节点功能

当装备首次被获取进入背包时，会进行初始化，此时事件出参会返回装备实例的唯一索引，通过此索引即可对装备进行动态修改。装备的持有者可以收到该事件，需要配置在道具节点图里

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 装备持有者 | 实体 |  |
| 出参 | 装备持有者 | GUID | GUID |
| 出参 | 装备索引 | 整数 |  |

### 4.装备的词条数值改变时

#### 节点功能

装备词条数值改变时触发该事件，装备的持有者可以收到，需要配置在道具节点图里

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 装备持有者 | 实体 |  |
| 出参 | 装备持有者 | GUID | GUID |
| 出参 | 装备索引 | 整数 |  |
| 出参 | 词条序号 | 整数 | 该词条在装备词条上的对应序号 |
| 出参 | 改变前数值 | 浮点数 |  |
| 出参 | 改变后数值 | 浮点数 |  |

## 二十四、道具

### 1.背包道具失去时

#### 节点功能

背包内该道具失去，即背包内该道具数量为0时触发该事件，背包组件的持有者可以收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 道具持有者 | 实体 | 实体 |
| 出参 | 道具持有者 | GUID | GUID |
| 出参 | 道具 | 配置ID | 配置ID |
| 出参 | 失去数量 | 整数 |  |

### 2.背包道具数量变化时

#### 节点功能

背包道具数量发生变化时触发该事件，背包组件的持有者可以收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 道具持有者 | 实体 | 实体 |
| 出参 | 道具持有者 | GUID | GUID |
| 出参 | 道具 | 配置ID | 配置ID |
| 出参 | 变化前数量 | 整数 |  |
| 出参 | 变化后数量 | 整数 |  |
| 出参 | 变化原因 | 枚举 |  |

### 3.背包道具新增时

#### 节点功能

背包内新增该道具时触发事件，背包组件的持有者可以收到。如果没有新增道具仅有数量变化则不会触发该事件

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 道具持有者 | 实体 | 实体 |
| 出参 | 道具持有者 | GUID | GUID |
| 出参 | 道具 | 配置ID | 配置ID |
| 出参 | 获得数量 | 整数 |  |

### 4.背包货币数量变化时

#### 节点功能

背包货币数量变化时触发该事件，背包组件的持有者可以收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 货币持有者 | 实体 | 实体 |
| 出参 | 货币持有者 | GUID | GUID |
| 出参 | 货币 | 配置ID | 配置ID |
| 出参 | 货币变化值 | 整数 |  |

### 5.背包内道具被使用时

#### 节点功能

背包内道具被使用时触发该事件，背包组件的持有者可以收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 道具持有者 | 实体 | 实体 |
| 出参 | 道具持有者 | GUID | GUID |
| 出参 | 道具 | 配置ID | 配置ID |
| 出参 | 使用数量 | 整数 |  |

## 二十五、造物巡逻

### 1.造物抵达巡逻路点时

#### 节点功能

若在巡逻模板编辑中，勾选了指定路点的到达发送节点图事件选项，则会在满足条件时，收到该节点图事件该节点图事件只能造物的节点图收到

#### 节点参数

| 参数类型 | 参数名 | 类型 | 说明 |
| --- | --- | --- | --- |
| 出参 | 造物 | 实体 | 实体运行时的造物实体 |
| 出参 | 造物 | GUID | GUID造物的GUID，若非初始布设的造物，则输 |
| 出参 | 当前巡逻模板序号 | 整数 | 造物当前生效的巡逻模板序号 |
| 出参 | 当前路径索引 | 整数 | 造物当前生效的巡逻模板引用的路径索引 |
| 出参 | 当前抵达路点序号 | 整数 | 造物当前抵达的路点序号 |
| 出参 | 即将前往路点序号 | 整数 | 造物即将前往的路点序号 |
